CREATE TABLE "Tasks" (
  "id" serial GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "title" text,
  "description" text,
  "notified" bool,
  "start" timestamp,
  "finish" timestamp
);

CREATE TABLE "Users" (
  "id" serial GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "name" text UNIQUE NOT NULL,
  "chatId" text
);

CREATE TABLE "Groups" (
  "id" serial GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  "title" text
);

CREATE TABLE "UsersTasks" (
  "userId" int,
  "taskId" int,
  "done" bool
);

CREATE TABLE "GroupsTasks" (
  "groupId" int,
  "taskId" int
);

CREATE TABLE "UsersGroups" (
  "userId" int,
  "groupId" int
);

CREATE INDEX ON "Tasks" ("finish");

ALTER TABLE "UsersTasks" ADD FOREIGN KEY ("userId") REFERENCES "Users" ("id");

ALTER TABLE "UsersTasks" ADD FOREIGN KEY ("taskId") REFERENCES "Tasks" ("id");

ALTER TABLE "GroupsTasks" ADD FOREIGN KEY ("groupId") REFERENCES "Groups" ("id");

ALTER TABLE "GroupsTasks" ADD FOREIGN KEY ("taskId") REFERENCES "Tasks" ("id");

ALTER TABLE "UsersGroups" ADD FOREIGN KEY ("groupId") REFERENCES "Groups" ("id");

ALTER TABLE "UsersGroups" ADD FOREIGN KEY ("userId") REFERENCES "Users" ("id");
